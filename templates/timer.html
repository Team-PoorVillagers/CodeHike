
<html>
<head>
  <meta charset="UTF-8">
  <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.js"></script>
  <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.js"></script>
  <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.sound.js"></script>
  <script language="javascript" type="text/javascript" src="sketch.js"></script>
</head>

<script type="text/javascript">
	
	var timeleft = {{ time 	}}; 
	var counter = 0
	var startTime = 0;
	var currentTime = 0;

	function convertSeconds(s) {
	  let min = floor(s / 60);
	  let sec = s % 60;
	  return nf(min, 2) + ':' + nf(sec, 2);
	}

	// var ding;

	// function preload() {
	//   ding = loadSound("ding.mp3");
	// }

	function setup() {
		let timer  = select('#timer')
		// startTime = millis();
		if(timeleft<0){
			timer.html("The contest has ended")
		}
		else{
			timer.html(timeleft - counter)
		 //  	var params = getURLParams();
		 //  	console.log(params);
		 //  	if (params.minute) {
		 //    	var min = params.minute;
		 //    	timeleft = min * 60;
		 //  	}

		  	let timer = select('#timer');
		  	timer.html(convertSeconds(timeleft - currentTime));

		  	// var interval = setInterval(timeIt, 1000);

		  	function timeIt() {
		  		counter++;
		    	// currentTime = floor((millis() - startTime) / 1000);
		    	timer.html(convertSeconds(timeleft - counter));
		    	// if (currentTime == timeleft) {
		      		// ding.play();
		      		// clearInterval(interval);
		      //counter = 0;
		    	// }
			}
			setInterval(timeIt , 1000)
		}
	}
</script>

<body>
	<p id="timer">_____</p>
</body>
</html>